"use strict";(self.webpackChunkosism=self.webpackChunkosism||[]).push([[7366],{7450:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>u,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var i=r(5893),s=r(1151);const t={sidebar_label:"Kubernetes",sidebar_position:200},d="Kubernetes",o={id:"kubernetes/index",title:"Kubernetes",description:"Erstellung von einem Kubernetes Cluster",source:"@site/docs/kubernetes/index.md",sourceDirName:"kubernetes",slug:"/kubernetes/",permalink:"/docs/kubernetes/",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:200,frontMatter:{sidebar_label:"Kubernetes",sidebar_position:200},sidebar:"docSidebar",previous:{title:"DNS",permalink:"/docs/dns"},next:{title:"Beispiele",permalink:"/docs/kubernetes/beispiele/"}},a={},c=[{value:"Erstellung von einem Kubernetes Cluster",id:"erstellung-von-einem-kubernetes-cluster",level:2},{value:"Nutzung von einem Kubernetes Cluster",id:"nutzung-von-einem-kubernetes-cluster",level:2},{value:"Web Terminal",id:"web-terminal",level:3},{value:"Kubeconfig",id:"kubeconfig",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"kubernetes",children:"Kubernetes"}),"\n",(0,i.jsx)(n.h2,{id:"erstellung-von-einem-kubernetes-cluster",children:"Erstellung von einem Kubernetes Cluster"}),"\n",(0,i.jsx)("img",{src:r(257).Z,width:"100%"}),"\n",(0,i.jsx)("img",{src:r(6936).Z,width:"100%"}),"\n",(0,i.jsx)(n.h2,{id:"nutzung-von-einem-kubernetes-cluster",children:"Nutzung von einem Kubernetes Cluster"}),"\n",(0,i.jsx)(n.h3,{id:"web-terminal",children:"Web Terminal"}),"\n",(0,i.jsx)(n.h3,{id:"kubeconfig",children:"Kubeconfig"}),"\n",(0,i.jsxs)(n.p,{children:["Das Credential Plugin ",(0,i.jsx)(n.a,{href:"https://github.com/gardener/gardenlogin#installation",children:"gardenlogin"}),"\nsowie die ",(0,i.jsx)(n.a,{href:"https://github.com/gardener/gardenctl-v2/#install-using-package-managers",children:"CLI f\xfcr Gardener"}),"\nund ",(0,i.jsx)(n.a,{href:"https://github.com/int128/kubelogin",children:"kubelogin"})," muss vorab installiert werden."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Homebrew (macOS and Linux)\nbrew install gardener/tap/gardenctl-v2\nbrew install gardener/tap/gardenlogin\nbrew install int128/kubelogin/kubelogin\n\n# Chocolatey (Windows)\nchoco install gardenctl-v2\nchoco install gardenlogin\nchoco install kubelogin\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Eine personalisierte Kubeconfig f\xfcr ein Projekt ",(0,i.jsx)(n.code,{children:"PROJECT"})," kann von\n",(0,i.jsx)(n.code,{children:"https://dashboard.okeanos.tech/account?namespace=garden-PROJECT"})," herunterladen und in einer lokalen Datei\nin ",(0,i.jsx)(n.code,{children:"~/.kube"})," abgelegt werden. Zum Beispiel in ",(0,i.jsx)(n.code,{children:"~/.kube/garden-okeanos"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Anschliessend wird diese Konfiguration mit ",(0,i.jsx)(n.code,{children:"gardenctl"})," bekannt gemacht."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'$ gardenctl config set-garden okeanos --kubeconfig "~/.kube/garden-okeanos"\nSuccessfully configured garden "okeanos"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Das vorherige Kommando erstellt die Datei ",(0,i.jsx)(n.code,{children:"~/.garden/gardenctl-v2.yaml"})," mit folgendem Inhalt:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"gardens:\n- identity: okeanos\n  kubeconfig: ~/.kube/garden-okeanos\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Die Kubeconfig f\xfcr ein Kubernetes Cluster ",(0,i.jsx)(n.code,{children:"CLUSTER"})," in einem Projekt ",(0,i.jsx)(n.code,{children:"PROJECT"})," ist unter ",(0,i.jsx)(n.code,{children:"Access"})," bei\n",(0,i.jsx)(n.code,{children:"Kubeconfig - Gardenlogin"})," abgelegt. Diese Kubeconfig herunterladen (oder den Inhalt kopieren) und in\neiner lokalen Datei ablegen. Zum Beispiel in ",(0,i.jsx)(n.code,{children:"~/.kube/config-pfee6i4v2j"})," wenn der Name des Clusters\n",(0,i.jsx)(n.code,{children:"pfee6i4v2j"})," ist."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["Wenn mehrere Projekte genutzt werden und dadurch bedingt mehrere Eintr\xe4ge in ",(0,i.jsx)(n.code,{children:"~/.garden/gardenctl-v2.yaml"}),"\nvorhanden sind ist es wichtig in dieser Kubeconfig eine \xc4nderung vorzunehmen. Der Eintrag\n",(0,i.jsx)(n.code,{children:"gardenClusterIdentity"})," ist per Default auf ",(0,i.jsx)(n.code,{children:"okeanos"})," gesetzt und muss entsprechend angepasst werden. Wenn z.B.\neine weiterer Eintrag ",(0,i.jsx)(n.code,{children:"demo"})," in ",(0,i.jsx)(n.code,{children:"~/.garden/gardenctl-v2.yaml"})," vorhanden ist und genutzt werden soll dann\nwird ",(0,i.jsx)(n.code,{children:"gardenClusterIdentity"})," entsprechend auf ",(0,i.jsx)(n.code,{children:"gardenClusterIdentity: demo"})," ge\xe4ndert."]})}),"\n",(0,i.jsxs)(n.p,{children:["Anschliessend kann z.B. ",(0,i.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/kubectl/",children:"kubectl"})," wie gewohnt verwendet werden\nnachdem die Kubeconfig wie gewohnt per ",(0,i.jsx)(n.code,{children:"KUBECONFIG"})," Umgebungsvariable bekannt gemacht wurde."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"$ export KUBECONFIG=~/.kube/config-pfee6i4v2j\n$ kubectl get nodes\nNAME                                                        STATUS   ROLES    AGE   VERSION\nshoot--PROJECT--CLUSTER-worker-g096a-z1-758bb-rmdfh   Ready    <none>   77m   v1.27.9\nshoot--PROJECT--CLUSTER-worker-iaz3a-z1-6c9cd-jx84f   Ready    <none>   87m   v1.27.9\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},257:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/gardener-create-cluster-1-0a3557ab9e7f5c7d66a58378eb7b9c3d.png"},6936:(e,n,r)=>{r.d(n,{Z:()=>i});const i=r.p+"assets/images/gardener-create-cluster-2-56f352ecc5585d6c7aba8ab2240e98d3.png"},1151:(e,n,r)=>{r.d(n,{Z:()=>o,a:()=>d});var i=r(7294);const s={},t=i.createContext(s);function d(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);