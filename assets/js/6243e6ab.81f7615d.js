"use strict";(self.webpackChunkosism=self.webpackChunkosism||[]).push([[6085],{3495:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var i=s(5893),r=s(1151);const a={},t="Helm",l={id:"kubernetes/beispiele/helm",title:"Helm",description:"Einfacher geht das ganze noch, wenn Helm benutzt wird. Dabei wird automatisch ein Service f\xfcr den Dienst erstellt.",source:"@site/docs/kubernetes/beispiele/helm.md",sourceDirName:"kubernetes/beispiele",slug:"/kubernetes/beispiele/helm",permalink:"/docs/kubernetes/beispiele/helm",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docSidebar",previous:{title:"Beispiele",permalink:"/docs/kubernetes/beispiele/"},next:{title:"Kubeapps",permalink:"/docs/kubernetes/beispiele/kubeapps"}},d={},c=[];function o(e){const n={a:"a",code:"code",h1:"h1",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"helm",children:"Helm"}),"\n",(0,i.jsxs)(n.p,{children:["Einfacher geht das ganze noch, wenn Helm benutzt wird. Dabei wird automatisch ein Service f\xfcr den Dienst erstellt.\nAusserdem kann, in den meisten F\xe4llen, innerhalb der ",(0,i.jsx)(n.code,{children:"Values"})," ein ",(0,i.jsx)(n.code,{children:"Ingress"})," konfiguriert werden. Zuvor muss jedoch,\nebenfalls per Helm, ein Ingress mit dem Type ",(0,i.jsx)(n.code,{children:"Loadbalancer"})," erstellt werden, damit eine \xf6ffentliche IP Adresse f\xfcr den\nnachfolgenden Dienst existiert."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="ingress-values.yaml"',children:'controller:\n  allowSnippetAnnotations: true\n  podLabels:\n    app: nginx-ingress\n    component: controller\n  extraArgs:\n    enable-ssl-passthrough: ""\n  config:\n    use-http2: true\n  service:\n    type: "LoadBalancer"\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx\n$ helm repo update\n$ helm upgrade -i ingress-nginx -f ingress-values.yaml --create-namespace -n ingress-nginx ingress-nginx/ingress-nginx\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="nginx-values.yaml"',children:'cloneStaticSiteFromGit:\n  enabled: true\n  repository: "https://github.com/regiocloud/example-website"\n  branch: "main"\n  interval: 3600\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ helm upgrade -i nginx -f nginx-values.yaml --create-namespace -n nginx oci://registry-1.docker.io/bitnamicharts/nginx\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Die Values in ",(0,i.jsx)(n.code,{children:"nginx-values.yaml"})," dienen nur als Beispiel. Hier wird eine statische Website ausgeliefert. Alle m\xf6glichen\nValues f\xfcr das Helm Chart finden sich in der ",(0,i.jsx)(n.a,{href:"https://github.com/bitnami/charts/blob/main/bitnami/nginx/values.yaml",children:"values.yaml"}),"\ndes Helm Charts selbst."]}),"\n",(0,i.jsxs)(n.p,{children:["Die Erstellung des Loadbalancers nimmt einige Zeit in Anspruch. Mit dem nachfolgendem Kommando kann darauf gewartet werden.\nSobald der Loadbalancer verf\xfcgbar ist wird in der Spalte ",(0,i.jsx)(n.code,{children:"EXTERNAL-IP"})," die \xf6ffentlich erreichbare IP Adresse des Loadbalancers\nhinterlegt. Das Kommand kann dann mit ",(0,i.jsx)(n.code,{children:"STRG+C"})," beendet werden."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ kubectl get svc --namespace nginx -w nginx\nNAME    TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)        AGE\nnginx   LoadBalancer   100.90.239.115   <pending>     80:31627/TCP   58s\nnginx   LoadBalancer   100.90.239.115   <pending>     80:31627/TCP   2m12s\nnginx   LoadBalancer   100.90.239.115   81.163.193.251   80:31627/TCP   2m12s\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Die Beispiel Website ist dann \xfcber die IP Adresse in der Spalte ",(0,i.jsx)(n.code,{children:"EXTERNAL-IP"})," \xfcber einen beliebigen Browser aufrufbar."]}),"\n",(0,i.jsx)(n.p,{children:"Zum Abrei\xdfen des Charts, kann folgender Befehl benutzt werden:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'$ helm uninstall nginx -n nginx\nrelease "nginx" uninstalled\n'})}),"\n",(0,i.jsx)(n.p,{children:"Der Loadbalancer kann wie folgt entfernt werden:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'$ helm uninstall ingress-nginx -n ingress-nginx\nrelease "ingress-nginx" uninstalled\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>l,a:()=>t});var i=s(7294);const r={},a=i.createContext(r);function t(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);